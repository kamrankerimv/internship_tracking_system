<!DOCTYPE html>
<html>
<head>
    <title>Internship Tracking System</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light">

<div class="container my-4">

    <h1 class="text-center mb-4">Internship Tracking System</h1>

    <!-- SEARCH BAR -->
    <div class="d-flex justify-content-center mb-4">
        <input id="search" class="form-control w-50" placeholder="Search by name or company">
    </div>

    <!-- ADD INTERN FORM -->
    <form action="/add" method="post" class="p-4 bg-white rounded shadow mb-4">
        <div class="row g-3">
            <div class="col-md-6">
                <input type="text" class="form-control" name="name" placeholder="Name" required>
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" name="university" placeholder="University" required>
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" name="company" placeholder="Company" required>
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" name="duration" placeholder="Duration" required>
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" name="mentor" placeholder="Mentor" required>
            </div>
            <div class="col-md-6">
                <select name="status" class="form-select">
                    <option>Active</option>
                    <option>Completed</option>
                </select>
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" name="performance" placeholder="Performance" required>
            </div>
            <div class="col-12 text-center">
                <button type="submit" class="btn btn-primary btn-lg mt-3">Add Intern</button>
            </div>
        </div>
    </form>

    <!-- EXPORT BUTTON -->
    <div class="text-center mb-4">
        <a href="/export" class="btn btn-success btn-lg">Export CSV</a>
    </div>

    <!-- INTERNS TABLE -->
    <div class="table-responsive mb-5">
        <table id="internTable" class="table table-striped table-hover text-center align-middle">
            <thead class="table-primary">
                <tr>
                    <th onclick="sortTable(0)" style="cursor:pointer">Name ⬍</th>
                    <th>Company</th>
                    <th>Status</th>
                    <th onclick="sortTable(3)" style="cursor:pointer">Score ⬍</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
            {% for i in interns %}
                <tr>
                    <td>{{ i[1] }}</td>
                    <td>{{ i[3] }}</td>
                    <td>
                        <span class="badge {{ 'bg-success' if i[6]=='Active' else 'bg-primary' }}">
                            {{ i[6] }}
                        </span>
                    </td>
                    <td>{{ i[7] }}</td>
                    <td><a href="/delete/{{ i[0] }}" class="text-danger fw-bold">Delete</a></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- CHARTS -->
    <div style="display: flex;justify-content: space-around;">
        <div class="col-md-3 mb-4">
            <h2 class="text-center mb-3">Internship Statistics</h2>
            <canvas id="chart" style="height:350px;width:250px !important"></canvas>
        </div>
        <div class="col-md-6 mb-4">
            <h2 class="text-center mb-3">Company Statistics</h2>
            <canvas id="companyChart" style="height:350px !important"></canvas>
        </div>
    </div>

</div>

<script src="/static/script.js"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
